<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->

<Server xmlns="http://wso2.org/projects/carbon/carbon.xml">

    <OpenIDServerUrl>https://<%= is_subdomain %>.<%= stratos_domain %>/openidserver</OpenIDServerUrl>

    <OpenIDUserPattern>https://<%= is_subdomain %>.<%= stratos_domain %>/openid/</OpenIDUserPattern>

    <RequestClaimsFromIdP>true</RequestClaimsFromIdP>

    <!--<OpenIDRealm>localhost</OpenIDRealm>-->
    <!--
      Security configurations
    -->
    <Security>
        <UserTrustedRPStore>
            <Location>${carbon.home}/repository/resources/security/userRP.jks</Location>
            <!-- Keystore type (JKS/PKCS12 etc.)-->
            <Type>JKS</Type>
            <!-- Keystore password-->
            <Password>wso2carbon</Password>
            <!-- Private Key password-->
            <KeyPassword>wso2carbon</KeyPassword>
        </UserTrustedRPStore>

	<UserSSOStore>
            <Location>${carbon.home}/repository/resources/security/wso2carbon.jks</Location>
            <!-- Keystore type (JKS/PKCS12 etc.)-->
            <Type>JKS</Type>
            <!-- Keystore password-->
            <Password>wso2carbon</Password>
			<KeyAlias>wso2carbon</KeyAlias>
            <!-- Private Key password-->
            <KeyPassword>wso2carbon</KeyPassword>
        </UserSSOStore>


        <UserPersonalCeritificateStore>
            <Location>${carbon.home}/repository/resources/security/wso2is-user-certs.jks</Location>
            <!-- Keystore type (JKS/PKCS12 etc.)-->
            <Type>JKS</Type>
            <!-- Keystore password-->
            <Password>wso2is</Password>
            <!-- Private Key password-->
            <KeyPassword>wso2is</KeyPassword>
        </UserPersonalCeritificateStore>

        <!--
           The directory under which all other KeyStore files will be stored
        -->
        <KeyStoresDir>${carbon.home}/conf/keystores</KeyStoresDir>
    </Security>

    <Identity>
        <IssuerPolicy>SelfAndManaged</IssuerPolicy>
        <TokenValidationPolicy>CertValidate</TokenValidationPolicy>
        <BlackList></BlackList>
        <WhiteList></WhiteList>
        <System>
            <KeyStore></KeyStore>
            <StorePass></StorePass>
        </System>
    </Identity>

    <MultifactorAuthentication>
        <XMPPSettings>
            <XMPPConfig>
                <XMPPProvider>gtalk</XMPPProvider>
                <XMPPServer>talk.google.com</XMPPServer>
                <XMPPPort>5222</XMPPPort>
                <XMPPExt>gmail.com</XMPPExt>
                <XMPPUserName>multifactor1@gmail.com</XMPPUserName>
                <XMPPPassword>wso2carbon</XMPPPassword>
            </XMPPConfig>
        </XMPPSettings>
    </MultifactorAuthentication>

    <SSOService>
        <IdentityProviderURL>https://<%= is_subdomain %>.<%= stratos_domain %>/samlsso</IdentityProviderURL>
    </SSOService>
</Server>
